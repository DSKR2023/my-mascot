<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desktop Mascot - Official Site</title>
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #87CEEB; /* ç©ºè‰² */
            --accent-color: #FFD700;  /* ã‚´ãƒ¼ãƒ«ãƒ‰ */
            --pink-color: #FFD1DC;    /* ãƒ”ãƒ³ã‚¯ */
            --text-color: #333;
        }

        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            font-family: 'M PLUS Rounded 1c', 'Helvetica Neue', Arial, sans-serif;
            background-color: #f8f9fa;
            color: var(--text-color);
        }

        /* èƒŒæ™¯ã‚­ãƒ£ãƒ³ãƒã‚¹ï¼šUIã®è£å´ã«é…ç½® */
        #mascotCanvas {
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1;
            cursor: default;
        }

        /* ãƒ¡ã‚¤ãƒ³ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼šãƒã‚¤ãƒ³ã‚¿ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆã‚’åˆ¶å¾¡ã—ã¦èƒŒæ™¯ã®ã‚­ãƒ¥ãƒ¼ãƒ–ã‚’è§¦ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹ */
        .ui-layer {
            position: relative;
            z-index: 10;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            pointer-events: none; 
        }

        /* ãƒ­ã‚´ãƒ‡ã‚¶ã‚¤ãƒ³ï¼šã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã¨ç¸å–ã‚Š */
        .logo-title {
            position: relative;
            margin-bottom: 2rem;
            filter: drop-shadow(0 4px 10px rgba(0,0,0,0.1));
        }

        .logo-title h1 {
            margin: 0;
            padding: 0;
            font-size: 3.8rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color), var(--pink-color), var(--primary-color));
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradientAnim 4s linear infinite;
            -webkit-text-stroke: 1.5px white; 
            paint-order: stroke fill;
        }

        @keyframes gradientAnim {
            to { background-position: 200% center; }
        }

        /* ãƒœã‚¿ãƒ³ãƒ‡ã‚¶ã‚¤ãƒ³ï¼š2ã‚«ãƒ©ãƒ ã‚°ãƒªãƒƒãƒ‰ */
        .button-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            pointer-events: auto; /* ãƒœã‚¿ãƒ³è‡ªä½“ã¯ã‚¯ãƒªãƒƒã‚¯å¯èƒ½ã« */
        }

        .btn {
            background: white;
            border: 2.5px solid var(--primary-color);
            padding: 14px 28px;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 800;
            color: var(--text-color);
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 4px 0 var(--primary-color);
            font-family: 'M PLUS Rounded 1c', sans-serif;
            text-align: center;
        }

        .btn:hover {
            transform: translateY(2px);
            box-shadow: 0 2px 0 var(--primary-color);
            background: #f0faff;
        }

        .btn-download { 
            border-color: #ff5a5f; 
            box-shadow: 0 4px 0 #ff5a5f; 
            color: white;
            background: #ff5a5f;
        }
        .btn-download:hover { 
            background: #ff7e82; 
            box-shadow: 0 2px 0 #ff5a5f;
        }

        /* ãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ï¼‰ */
        .modal {
            display: none;
            position: fixed;
            z-index: 100;
            left: 0; top: 0; width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.6);
            backdrop-filter: blur(4px);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 40px;
            border-radius: 20px;
            width: 85%;
            max-width: 550px;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            line-height: 1.8;
            font-size: 0.95rem;
        }

        .close-btn {
            position: absolute; right: 20px; top: 10px;
            font-size: 30px; cursor: pointer; color: #ccc;
        }

        h2 { color: var(--primary-color); border-bottom: 2px solid var(--accent-color); padding-bottom: 10px; margin-bottom: 20px; font-size: 1.4rem; }
        .modal-body ul { padding-left: 20px; }

        footer {
            position: absolute; bottom: 20px; width: 100%;
            text-align: center; z-index: 10; pointer-events: auto;
            font-size: 0.8rem; font-weight: bold; color: #777;
        }
        footer a { color: var(--primary-color); text-decoration: none; border-bottom: 1px solid; }
    </style>
</head>
<body>

    <canvas id="mascotCanvas"></canvas>

    <div class="ui-layer">
        <div class="logo-title">
            <h1>Desktop Mascot</h1>
        </div>
        
        <div class="button-grid">
            <button class="btn btn-download" onclick="openModal('downloadModal')">ğŸ“¥ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
            <button class="btn" onclick="openModal('howToUseModal')">ğŸ“– ä½¿ç”¨æ–¹æ³•</button>
            <button class="btn" onclick="openModal('termsModal')">ğŸ“œ åˆ©ç”¨è¦ç´„</button>
            <button class="btn" onclick="openModal('privacyModal')">ğŸ”’ ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼</button>
        </div>
    </div>

    <footer>
        made by Jumu Tinora(DSKR) | 
        <a href="https://dskr-home.vercel.app/#home" target="_blank">ã‚µãƒ¼ã‚¯ãƒ«å…¬å¼HP</a>
    </footer>

    <div id="downloadModal" class="modal" onclick="closeModalOnOuter(event)">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('downloadModal')">&times;</span>
            <h2>ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</h2>
            <div class="modal-body">
                <p>ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ãƒã‚¹ã‚³ãƒƒãƒˆï¼ˆWindowsç‰ˆï¼‰ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã¾ã™ã€‚</p>
                <p style="color: #e63946; font-weight: bold;">â€»ç¾åœ¨å…¬é–‹æº–å‚™ä¸­ã§ã™ã€‚BOOTHã§ã®å…¬é–‹ã‚’ãŠå¾…ã¡ãã ã•ã„ã€‚</p>
                <a href="#" target="_blank" style="display:inline-block; margin-top:10px; background:#ff5a5f; color:white; padding:12px 25px; border-radius:10px; text-decoration:none; font-weight:bold;">BOOTHã§ãƒã‚§ãƒƒã‚¯ã™ã‚‹</a>
            </div>
        </div>
    </div>

    <div id="howToUseModal" class="modal" onclick="closeModalOnOuter(event)">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('howToUseModal')">&times;</span>
            <h2>ä½¿ç”¨æ–¹æ³•</h2>
            <div class="modal-body">
                <ul>
                    <li><strong>åŸºæœ¬æ“ä½œ:</strong> å±•é–‹ã—ãŸãƒ•ã‚©ãƒ«ãƒ€å†…ã®ã€ŒDesktopMascot.exeã€ã‚’èµ·å‹•ã—ã¦ãã ã•ã„ã€‚</li>
                    <li><strong>Googleé€£æº:</strong> ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚„ãƒ‰ãƒ©ã‚¤ãƒ–ã¨åŒæœŸã—ã¦ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç®¡ç†ãŒå¯èƒ½ã§ã™ã€‚</li>
                    <li><strong>ãŠä¸–è©±:</strong> ãƒã‚¦ã‚¹ã§æ’«ã§ãŸã‚Šè©±ã—ã‹ã‘ãŸã‚Šã—ã¦ã€ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã‚’è‚²ã¦ã¦ãã ã•ã„ã€‚</li>
                    <li><strong>Webé™å®šæ©Ÿèƒ½:</strong> ã“ã®èƒŒæ™¯ã®ã‚­ãƒ¥ãƒ¼ãƒ–ã¯ã€ã‚¯ãƒªãƒƒã‚¯ã§è·³ã­ã•ã›ãŸã‚Šã€ãƒ‰ãƒ©ãƒƒã‚°ã§æŠ•ã’é£›ã°ã—ãŸã‚Šã§ãã¾ã™ï¼ä¸‹ã«è½ã¡ã‚‹ã¨æ–°ã—ã„å­ãŒã‚„ã£ã¦ãã¾ã™ã€‚</li>
                </ul>
            </div>
        </div>
    </div>

    <div id="termsModal" class="modal" onclick="closeModalOnOuter(event)">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('termsModal')">&times;</span>
            <h2>åˆ©ç”¨è¦ç´„</h2>
            <div class="modal-body">
                <ul>
                    <li><strong>äºŒæ¬¡é…å¸ƒã®ç¦æ­¢:</strong> å€‹äººæƒ…å ±æµå‡ºé˜²æ­¢ã®ãŸã‚ã€exeãƒ•ã‚¡ã‚¤ãƒ«åŒ–ã—ãŸãƒ‡ãƒ¼ã‚¿ã®é…å¸ƒã‚„è­²æ¸¡ã¯å›ºãç¦ã˜ã¾ã™ã€‚</li>
                    <li><strong>æ”¹é€ ã®åˆ¶é™:</strong> é–‹ç™ºã‚­ãƒƒãƒˆã®æ”¹é€ ã¯è‡ªç”±ã§ã™ãŒã€è‡ªä½œç™ºè¨€ã¯ç¦æ­¢ã§ã™ã€‚</li>
                    <li><strong>å…è²¬äº‹é …:</strong> æœ¬ã‚½ãƒ•ãƒˆã®ä½¿ç”¨ã«ã‚ˆã£ã¦ç™ºç”Ÿã—ãŸã„ã‹ãªã‚‹å•é¡Œã«ã¤ã„ã¦ã‚‚è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚</li>
                </ul>
            </div>
        </div>
    </div>

    <div id="privacyModal" class="modal" onclick="closeModalOnOuter(event)">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('privacyModal')">&times;</span>
            <h2>ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</h2>
            <div class="modal-body">
                <p><strong>å€‹äººãƒ‡ãƒ¼ã‚¿:</strong> æœ¬ã‚¢ãƒ—ãƒªãŒå–å¾—ã—ãŸã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç­‰ã®ãƒ‡ãƒ¼ã‚¿ã¯åˆ©ç”¨è€…ã®PCå†…ã®ã¿ã«ä¿å­˜ã•ã‚Œã€ç¬¬ä¸‰è€…ã®ã‚µãƒ¼ãƒãƒ¼ã¸é€ä¿¡ã•ã‚Œã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
            </div>
        </div>
    </div>

    <script>
        // --- ãƒ¢ãƒ¼ãƒ€ãƒ«åˆ¶å¾¡ãƒ­ã‚¸ãƒƒã‚¯ ---
        function openModal(id) { document.getElementById(id).style.display = "block"; }
        function closeModal(id) { document.getElementById(id).style.display = "none"; }
        function closeModalOnOuter(event) { if (event.target.className === "modal") { event.target.style.display = "none"; } }
        window.addEventListener('keydown', (e) => { if (e.key === "Escape") { document.querySelectorAll('.modal').forEach(m => m.style.display = "none"); } });

        // --- ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ»ãƒ•ã‚©ãƒ¼ãƒ«ãƒ»ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ ---
        const canvas = document.getElementById('mascotCanvas');
        const ctx = canvas.getContext('2d');
        let cubes = [];
        let draggedCube = null;
        let mouseX = 0, mouseY = 0;
        let lastMX = 0, lastMY = 0;
        let isMouseDown = false;
        let dragStartTime = 0;
        let startMX = 0, startMY = 0;

        function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
        window.addEventListener('resize', resize);
        resize();

        class MascotCube {
            constructor() { this.init(); this.y = Math.random() * canvas.height; }
            init() {
                this.size = 35 + Math.random() * 40;
                this.x = Math.random() * canvas.width;
                this.y = -this.size - (Math.random() * 300); // ç”»é¢ä¸Šã‹ã‚‰ãƒªã‚¹ãƒãƒ¼ãƒ³
                this.speedY = 0.5 + Math.random() * 1.5;
                this.speedX = (Math.random() - 0.5) * 0.8;
                this.rotation = Math.random() * Math.PI * 2;
                this.rotSpeed = (Math.random() - 0.5) * 0.02;
                this.color = ["#87CEEB", "#FFD700", "#FFD1DC", "#E0FFFF"][Math.floor(Math.random() * 4)];
                this.expr = Math.floor(Math.random() * 4);
                this.timer = 150 + Math.random() * 300;
                this.isDragging = false;
            }
            update() {
                if (this.isDragging) {
                    // ãƒ‰ãƒ©ãƒƒã‚°ä¸­ã¯ãƒã‚¦ã‚¹ã«æ»‘ã‚‰ã‹ã«è¿½å¾“
                    this.x += (mouseX - this.x) * 0.3;
                    this.y += (mouseY - this.y) * 0.3;
                    this.speedX = mouseX - lastMX; // æŠ•ã’ãŸæ™‚ã®åˆé€Ÿç”¨
                    this.speedY = mouseY - lastMY;
                } else {
                    this.y += this.speedY;
                    this.x += this.speedX;
                    this.rotation += this.rotSpeed;
                    this.speedY += 0.12; // é‡åŠ›ï¼ˆå°‘ã—ã‚†ã£ãã‚Šã‚ã«è¨­å®šï¼‰
                    
                    this.timer--;
                    if (this.timer <= 0) { this.expr = Math.floor(Math.random() * 4); this.timer = 150 + Math.random() * 300; }
                    
                    // â˜…ä¿®æ­£ï¼šåœ°é¢ã§æ­¢ã¾ã‚‰ãšã€ç”»é¢ä¸‹ã«è¡Œã£ãŸã‚‰ãƒªã‚»ãƒƒãƒˆã—ã¦ä¸Šã‹ã‚‰å‡ºã™
                    if (this.y > canvas.height + this.size) {
                        this.init();
                    }
                    
                    // å·¦å³ã®å£ã§è·³ã­è¿”ã‚‹
                    if (this.x < this.size/2 || this.x > canvas.width - this.size/2) {
                        this.speedX *= -0.7;
                        this.x = Math.max(this.size/2, Math.min(canvas.width - this.size/2, this.x));
                    }
                    
                    // æŠ•ã’é£›ã°ã—ã¦ç”»é¢ä¸Šã«è¡Œãã™ããŸå ´åˆã‚‚ãƒªã‚»ãƒƒãƒˆ
                    if (this.y < -800) this.init();
                }
            }
            draw() {
                ctx.save();
                ctx.translate(this.x, this.y); ctx.rotate(this.rotation);
                if (this.isDragging) { ctx.shadowBlur = 15; ctx.shadowColor = "rgba(0,0,0,0.2)"; ctx.scale(1.1, 1.1); }
                ctx.fillStyle = this.color; ctx.strokeStyle = "#333"; ctx.lineWidth = 1.5;
                ctx.beginPath(); ctx.roundRect(-this.size/2, -this.size/2, this.size, this.size, 6); ctx.fill(); ctx.stroke();
                const eyeR = this.size * 0.08, eyeX = this.size * 0.2, eyeY = -this.size * 0.1;
                ctx.fillStyle = "#333"; ctx.strokeStyle = "#333";
                if (this.expr === 1) { // ç¡çœ 
                    ctx.beginPath(); ctx.arc(-eyeX, eyeY, eyeR, 0, Math.PI); ctx.stroke();
                    ctx.beginPath(); ctx.arc(eyeX, eyeY, eyeR, 0, Math.PI); ctx.stroke();
                } else if (this.expr === 2) { // ã„ã˜ã‘
                    ctx.fillRect(-eyeX - eyeR, eyeY, eyeR*2, 1.5); ctx.fillRect(eyeX - eyeR, eyeY, eyeR*2, 1.5);
                    ctx.beginPath(); ctx.arc(0, this.size*0.2, eyeR, Math.PI, 0); ctx.stroke();
                } else if (this.expr === 3 || this.isDragging) { // ç›®ãŒå›ã‚‹
                    ctx.font = `bold ${this.size*0.25}px Arial`; ctx.fillText("@", -eyeX - eyeR, eyeY + eyeR); ctx.fillText("@", eyeX - eyeR, eyeY + eyeR);
                } else { // é€šå¸¸
                    ctx.beginPath(); ctx.arc(-eyeX, eyeY, eyeR, 0, Math.PI*2); ctx.fill();
                    ctx.beginPath(); ctx.arc(eyeX, eyeY, eyeR, 0, Math.PI*2); ctx.fill();
                    ctx.beginPath(); ctx.arc(0, this.size*0.1, eyeR, 0, Math.PI); ctx.stroke();
                }
                ctx.restore();
            }
            isHit(mx, my) {
                return mx > this.x - this.size/2 && mx < this.x + this.size/2 &&
                       my > this.y - this.size/2 && my < this.y + this.size/2;
            }
            bounce() {
                this.speedY = -12 - Math.random() * 5; // ä¸Šã«ãƒ”ãƒ§ãƒ¼ãƒ³ï¼
                this.speedX = (Math.random() - 0.5) * 10;
                this.expr = 3;
            }
        }

        // åˆæœŸã‚­ãƒ¥ãƒ¼ãƒ–ç”Ÿæˆ
        for (let i = 0; i < 12; i++) cubes.push(new MascotCube());

        // --- ãƒã‚¦ã‚¹æ“ä½œï¼šã‚¯ãƒªãƒƒã‚¯ã¨ãƒ‰ãƒ©ãƒƒã‚°ã‚’ä¸¡ç«‹ ---
        canvas.addEventListener('mousedown', e => {
            const rect = canvas.getBoundingClientRect();
            startMX = e.clientX - rect.left;
            startMY = e.clientY - rect.top;
            isMouseDown = true;
            dragStartTime = Date.now();

            for (let i = cubes.length - 1; i >= 0; i--) {
                if (cubes[i].isHit(startMX, startMY)) {
                    draggedCube = cubes[i];
                    break;
                }
            }
        });

        window.addEventListener('mousemove', e => {
            const rect = canvas.getBoundingClientRect();
            lastMX = mouseX;
            lastMY = mouseY;
            mouseX = e.clientX - rect.left;
            mouseY = e.clientY - rect.top;
            
            if (draggedCube && isMouseDown) {
                const dist = Math.hypot(mouseX - startMX, mouseY - startMY);
                if (dist > 5) {
                    draggedCube.isDragging = true;
                    canvas.style.cursor = "grabbing";
                }
            } else {
                let hovering = false;
                cubes.forEach(c => { if(c.isHit(mouseX, mouseY)) hovering = true; });
                canvas.style.cursor = hovering ? "grab" : "default";
            }
        });

        window.addEventListener('mouseup', () => {
            if (draggedCube) {
                const dragDuration = Date.now() - dragStartTime;
                const dist = Math.hypot(mouseX - startMX, mouseY - startMY);

                // çŸ­ã„ã‚¿ãƒƒãƒ—ã‚„å‹•ãã®å°‘ãªã„ã‚¯ãƒªãƒƒã‚¯ãªã‚‰è·³ã­è¿”ã‚‰ã›ã‚‹
                if (!draggedCube.isDragging || (dragDuration < 200 && dist < 10)) {
                    draggedCube.bounce();
                }
                
                draggedCube.isDragging = false;
                draggedCube = null;
            }
            isMouseDown = false;
            canvas.style.cursor = "default";
        });

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            cubes.forEach(c => { c.update(); c.draw(); });
            requestAnimationFrame(animate);
        }
        animate();
    </script>
</body>
</html>
